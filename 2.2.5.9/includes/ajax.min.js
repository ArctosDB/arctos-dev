function confineToIframe(){var e;!1===inIframe()&&((e=document.createElement("div")).id="bgDiv",e.className="bgDiv",document.body.appendChild(e),alert("Improper Access: This form should not be accessed in this way, please file an Issue."))}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function openOverlay(e,t="No title provided."){var n=document.createElement("div");n.id="bgDiv",n.className="bgDiv",n.setAttribute("onclick","closeOverlay()"),document.body.appendChild(n);n=document.createElement("div");n.id="overlayDiv",n.className="overlayDiv",document.body.appendChild(n);n=document.createElement("div");n.className="overlayDivHeader",n.id="overlayDivHeader",n.append(t),$("#overlayDiv").append(n);n=document.createElement("span");n.className="closeOverlay",n.id="closeOverlay",n.setAttribute("onclick","closeOverlay()"),n.append("Ã—"),$("#overlayDivHeader").append(n),$("#overlayDiv").append('<img id="overlayLoadingImg" src="/images/loadingAnimation.gif" class="centeredImage">');n=document.createElement("iFrame");n.id="overlayiFrame",n.className="overlayiFrame",n.src=e,$("#overlayDiv").append(n),$("#overlayLoadingImg").remove()}function closeOverlay(){$("#overlayDiv").remove(),$("#overlayDiv",window.parent.document).remove(),$("#bgDiv").remove()}function pickEscapeSingleQuoteOnly(e){return e.replace(/'/g,"\\'")}function pickEscapeQuote(e){return e.replace(/'/g,"\\'").replace(/"/g,"`")}function convertCoords(e,t){$("<iframe src='"+("/form/coordinateConverter.cfm?dlatfld="+e+"&dlonfld="+t)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","top"],title:"Coordinate Converter",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function pickTaxonConcept(e,t,n){n=encodeURIComponent(n),$("#"+t).addClass("badPick"),n=void 0!==n?n:"",$("<iframe src='"+("/picks/findTaxonConcept.cfm?tcidFld="+e+"&tcvFld="+t+"&name="+n)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","top"],title:"Pick Concept",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function postSessTime(e){try{if(!$("#sessExpMin").length||!$("#slcd").length)return!1;void 0!==e&&$("#slcd").val(e);var t=(new Date).getTime(),n=$("#slcd").val(),n=54e5-(t-n),n=Math.round(n/6e4);n<=0&&(n="NOW!"),$("#sessExpMinNO").html(" ["+n+"]"),$("#sessExpMin").html(n+" minutes left in session")}catch(e){}}function createAgent(e,t,n,i,a){a="/includes/forms/createagent.cfm?agent_type="+e+"&caller="+(t=t||"")+"&agentIdFld="+(n=n||"")+"&agentNameFld="+(i=i||"")+"&agentNameVal="+(a=a||"");parent.$("#dialog").length?parent.$("#dialog").attr("src",a):($("<iframe src='"+a+"' id='dialog' class='popupDialog' style='width:1200px;height:800px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:800,modal:!0,position:["center","center"],title:"New Agent",width:1200,close:function(){$(this).remove()}}).width(1190).height(790),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")}))}function customizePlaceSearchForm(e){$("<iframe src='"+("/form/customizePlaceSearch.cfm?typ="+e)+"' id='dialog' class='popupDialog' style='width:1200px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","top"],title:"Customize Form",width:1200,close:function(){$(this).remove()}}).width(1190).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function customizePlaceForm(e){$("<iframe src='"+("/form/customizePlace.cfm?sch="+e)+"' id='dialog' class='popupDialog' style='width:1200px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","top"],title:"Customize Form",width:1200,close:function(){$(this).remove()}}).width(1190).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function pickAgentModal(e,t,n){n=encodeURIComponent(n),$("#"+t).addClass("badPick"),n=void 0!==n?n:"",$("<iframe src='"+("/picks/findAgentModal.cfm?agentIdFld="+e+"&agentNameFld="+t+"&name="+n)+"' id='dialog' class='popupDialog' style='width:1200px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","top"],title:"Pick Agent",width:1200,close:function(){$(this).remove()}}).width(1190).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getFormattedDate(){var e=new Date;return e.getFullYear()+"-"+getFormattedPartTime(e.getMonth()+1)+"-"+getFormattedPartTime(e.getDate())}function getFormattedPartTime(e){return e<10?"0"+e:e}function fetchMediaMeta(){var i=[];$("[data-doi]").each(function(e,t){var n=$(this).attr("data-doi");i.push(n)});var e=i.join();0!=e.length&&$.ajax({url:"/component/functions.cfc?queryformat=column",type:"GET",dataType:"json",data:{method:"getPubCitSts",doilist:e,returnformat:"json"},success:function(e){"SUCCESS"==e.STATUS?$.each(e.STSARY,function(e,t){var n="<ul>";n+="<li>References Count: "+t.REFERENCE_COUNT+"</li>",n+="<li>Referenced By Count: "+t.REFERENCE_BY_COUNT+"</li>",n+='<li><a data-doi="'+t.DOI+'" href="/info/publicationDetails.cfm?doi='+t.DOI+'" class="modalink">CrossRef Data</a></li>',n+="</ul>";t=t.DOI.replace(/[\W_]+/g,"_");$("#x"+t).append(n)}):alert(e.STATUS+": "+e.MSG)},error:function(e,t,n){alert(n+": "+t+": "+e)}})}function showPubInfo(e){$("<iframe src='"+("/info/publicationDetails.cfm?doi="+e)+"' id='dialog' class='popupDialog' style='width:800px;height:800px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:800,modal:!0,position:["center","center"],title:"Publication Details",width:800,close:function(){$(this).remove()}}).width(790).height(790),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function addMedia(e,t){$("<iframe src='"+("/picks/upLinkMedia.cfm?ktype="+e+"&kval="+t)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","center"],title:"Add Media",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function loadEditAgent(e){$("#agntEditCell").html('<img src="/images/indicator.gif">');var t="/editAllAgent.cfm?agent_id="+e;$("#agntEditCell").load(t,{},function(){history.pushState("data","","/agents.cfm?agent_id="+e)})}function loadAgentSearch(e){var t;$("#agntRslCell").html('<img src="/images/indicator.gif">'),$.ajax({url:"/component/api/v2/jsonutils.cfc?queryformat=column&method=findAgents&returnformat=json",type:"GET",dataType:"json",data:e,success:function(e){if(e.substring&&"error"==e.substring(0,5))return $("#agntRslCell").html('<span class="importantNotification">'+e+"</span>"),alert(e),!1;if(0===e.ROWCOUNT)return $("#agntRslCell").html('<span class="importantNotification">Nothing Matched.</span>'),!1;for(t='<div style="height:30em; overflow:auto;">',i=0;i<e.ROWCOUNT;i++)0<=e.DATA.AGENT_ID[i]?(t+='<div><span class="likeLink" onclick="loadEditAgent('+e.DATA.AGENT_ID[i]+');">',t+=e.DATA.PREFERRED_AGENT_NAME[i]+'</span><font size="-1"> (',t+=e.DATA.AGENT_TYPE[i]+": "+e.DATA.AGENT_ID[i]+")",t+=' <a target="_blank" href="/agents.cfm?agent_id='+e.DATA.AGENT_ID[i]+'">[new window]</a></font></div>'):(t+="<div>",t+=e.DATA.PREFERRED_AGENT_NAME[i]+'<font size="-1"> (',t+=e.DATA.AGENT_TYPE[i]+")",t+=' <a target="_blank" href="/search.cfm?attribute_type_1=verbatim+agent&attribute_value_1=='+e.DATA.PREFERRED_AGENT_NAME[i]+'">[CatalogRecords]</a></font>');t+="</div>",$("#agntRslCell").html(t)},error:function(e,t,n){alert(n+": "+t+": "+e)}})}function addGroupMember(){var e=parseInt($("#nnga").val())+parseInt(1),t='<div><input type="hidden" name="member_agent_id_new'+e+'" id="member_agent_id_new'+e+'">';t+='<input type="text" name="group_member_new'+e+'" id="group_member_new'+e+'"',t+=" onchange=\"pickAgentModal('member_agent_id_new"+e+"',this.id,this.value); return false;\"",t+=' onKeyPress="return noenter(event);" placeholder="new group member" class="minput"></div>',$("#newGroupMembers").append(t),$("#nnga").val(e)}function addAgentName(){var e=parseInt($("#nnan").val())+parseInt(1),t='<div id="agentnamedv'+e+'"><select name="agent_name_type_new'+e+'" id="agent_name_type_new'+e+'"></select>';t+='<input type="text" name="agent_name_new'+e+'" id="agent_name_new'+e+'" size="40" placeholder="new agent name" class="minput"></div>',$("#agentnamedv"+$("#nnan").val()).after(t),$("#agent_name_type_new1").find("option").clone().appendTo("#agent_name_type_new"+e),$("#nnan").val(e)}function addAgentStatus(){var e=parseInt($("#nnas").val())+parseInt(1),t='<div id="nas'+e+'" style="display: table-row;"><div style="display:table-cell">';t+='<select name="agent_status_new'+e+'" id="agent_status_new'+e+'" size="1"></select>',t+='</div><div style="display:table-cell"><input type="datetime" class="sinput" placeholder="status date" name="status_date_new'+e+'" id="status_date_new'+e+'"></div>',t+='<div style="display:table-cell"><textarea class="mediumtextarea" name="status_remark_new'+e+'" id="status_remark_new'+e+'" placeholder="status remark"></textarea></div></div>',$("#nas"+$("#nnas").val()).after(t),$("#agent_status_new1").find("option").clone().appendTo("#agent_status_new"+e),$("#status_date_new"+e).datepicker(),$("#nnas").val(e)}function addAgentRelationship(){var e=parseInt($("#nnar").val())+parseInt(1),t='<tr id="nar'+e+'" class="newRec">';t+='<td><select name="agent_relationship_new'+e+'" id="agent_relationship_new'+e+'" size="1"></select></td>',t+="<td>",t+='<input type="hidden" name="related_agent_id_new'+e+'" id="related_agent_id_new'+e+'">',t+='<input type="text" name="related_agent_new'+e+'" id="related_agent_new'+e+'"',t+="onchange=\"pickAgentModal('related_agent_id_new"+e+"',this.id,this.value); return false;\"",t+='onKeyPress="return noenter(event);" placeholder="pick related agent" class="">',t+="</td>",t+='<td><input type="datetime" class="sinput" placeholder="begin date" name="relationship_began_date_new'+e+'" id="relationship_began_date_new'+e+'"></td>',t+='<td><input type="datetime" class="sinput" placeholder="begin date" name="relationship_end_date_new'+e+'" id="relationship_end_date_new'+e+'"></td>',t+='<td><textarea class="tinytextarea" name="relationship_remarks_new'+e+'" placeholder="relationship remark" id="relationship_remarks_new'+e+'"></textarea></td>',t+="<td></td>",t+="</tr>",$("#nar"+$("#nnar").val()).after(t),$("#agent_relationship_new1").find("option").clone().appendTo("#agent_relationship_new"+e),$("#nnar").val(e),$("#relationship_began_date_new"+e).datepicker(),$("#relationship_end_date_new"+e).datepicker()}function addAddress(){var e=parseInt($("#nnea").val())+parseInt(1),t='<div id="eaddiv'+e+'" class="newRec">';t+='<select name="address_type_new'+e+'" id="address_type_new'+e+'" size="1"></select>',t+='<input type="text" class="minput" name="address_new'+e+'" id="address_new'+e+'" placeholder="add address">',t+='<input type="datetime" name="start_date_new'+e+'" id="start_date_new'+e+'" placeholder="start date" size="10">',t+='<input type="datetime" name="end_date_new'+e+'" id="end_date_new'+e+'" placeholder="end date" size="10">',t+='<textarea class="smalltextarea" placeholder="remark" name="address_remark_new'+e+'" id="address_remark_new'+e+'"></textarea>',t+="</div>",$("#eaddiv"+$("#nnea").val()).after(t),$("#address_type_new1").find("option").clone().appendTo("#address_type_new"+e),$("#nnea").val(e)}function rankAgent(e){e="/includes/forms/agentrank.cfm?agent_id="+e;$("<div id='dialog' class='popupDialog'><img src='/images/indicator.gif'></div>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Rank Agent",width:"auto",close:function(){$(this).remove()}}).load(e,function(){$(this).dialog("option","position",["center","center"])}),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function editAgentAddress(e){e="includes/forms/editAgentAddr.cfm?action=editAddress&addr_id="+e;$("<div id='dialog' class='popupDialog'><img src='/images/indicator.gif'></div>").dialog({autoOpen:!0,closeOnEscape:!0,height:"auto",modal:!0,position:["center","center"],title:"Edit Address",width:"auto",close:function(){$(this).remove()}}).load(e,function(){$(this).dialog("option","position",["center","center"])}),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getUrlParameter(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e)return i[1]}}function checkReplaceNoPrint(i,t){var n;if(0!==$("#"+t).val().length)return 0<=$("#"+t).val().indexOf("[NOPRINT]")?(alert("remove [NOPRINT] from "+t),i.preventDefault(),!1):void $.ajax({url:"/component/functions.cfc?queryformat=column",type:"POST",dataType:"json",async:!1,data:{method:"removeNonprinting",orig:$("#"+t).val(),userString:"[NOPRINT]",returnformat:"json"},success:function(e){if(e.DATA.REPLACED_WITH_USERSTRING[0]!=$("#"+t).val())return $("#"+t).val(e.DATA.REPLACED_WITH_USERSTRING[0]),n="The form cannot be submitted: There are nonprinting characters in "+t+".\n\n",n+="Nonprinting characters have been replaced with [NOPRINT]. Remove that to continue.\n\n",n+="You may use HTML markup for print control: <br> is linebreak",alert(n),i.preventDefault(),!1},error:function(e,t,n){return alert(n+": "+t+": "+e),i.preventDefault(),!1}})}function setSessionCustomID(e){$.getJSON("/component/functions.cfc",{method:"setSessionCustomID",val:e,returnformat:"json",queryformat:"column"},function(e){})}function jqueryspecialescape(e){return e.replace(/[ !"#$%&'()*+,.\/:;<=>?@^`{|}~]/g,"\\$&")}function checkCSV(e){e=e.value;"csv"!=e.substring(e.lastIndexOf(".")+1).toLowerCase()?(alert("Only files with the file extension CSV are allowed"),$("input[type=submit]").hide()):$("input[type=submit]").show()}function getMedia(e,t,n,i,a){$("#"+n).find($("#imgBrowserCtlDiv")).append('<img src="/images/indicator.gif">'),a="/form/inclMedia.cfm?typ="+e+"&q="+t+"&tgt="+n+"&rpp="+i+"&pg="+a,$.get(a,function(e){$("#"+n).html(e)})}function findPart(e,t,n){e="/picks/findPart.cfm?part_name="+(t=t.replace("%","_"))+"&collCde="+n+"&partFld="+e;partpick=window.open(e,"","width=800,height=600, resizable,scrollbars")}function isValidEmailAddress(e){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)}function saveThisAnnotation(){var t=document.getElementById("idtype").value,n=document.getElementById("idvalue").value,i=document.getElementById("annotation").value,e=($("#captchaHash").val(),$("#captcha").val().toUpperCase());if(i.length<=20)return alert("You must enter an annotation of at least 20 characters to save."),!1;if(!isValidEmailAddress($("#email").val()))return alert("Enter a valid email address."),!1;$("#annotateDiv").append('<div id="svgol" style="float:left;position:absolute;top:0;width:100%;height:100%;background-color:rgba(128,128,128,0.5);padding-left:50%;padding-top:20%;"><img src="/images/indicator.gif"></div>'),$.ajax({url:"/component/functions.cfc",type:"POST",dataType:"json",data:{method:"hashString",string:e,returnformat:"json"},success:function(e){$.ajax({url:"/component/functions.cfc",type:"POST",dataType:"json",data:{method:"addAnnotation",idType:t,idvalue:n,annotation:i,email:$("#email").val(),returnformat:"json",queryformat:"column"},success:function(e){return"success"==e?($("#svgol").remove(),alert("Your annotations have been saved, and the appropriate curator will be alerted. \n Thank you for helping improve Arctos!"),closeAnnotation()):($("#svgol").remove(),alert("An error occured! \n "+e)),!0},error:function(e,t,n){console.log(n+": "+t+": "+e)}})},error:function(e,t,n){console.log(n+": "+t+": "+e)}})}function openAnnotation(e){$("<iframe src='"+("/info/annotate.cfm?q="+e)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").prop("id","dialog").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","center"],title:"Report Bad Data",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function closeAnnotation(){parent.$(".ui-dialog-titlebar-close").trigger("click")}function archiveRecords(e){if(p="Archive search RESULTS. Use Save Search to save CRITERIA.\n",p+=" Type a name for the archive. Names must consist only of lower-case letters, numbers, dash (-), and underbar (_).\n",p+=" The process will take a few seconds; hang tight until you get a confirmation.\n",p+="'myarchive' will create a new archive (or fail); '+myarchive' will append to your existing archive 'myarchive' (or fail).",sName=prompt(p),!sName)return!1;$.getJSON("/component/functions.cfc",{method:"archiveSpecimen",archive_name:sName,table_name:e,returnformat:"json",queryformat:"column"},function(e){alert(e)})}function lockArchive(e){if(!0!==confirm("Are you sure you want to lock this Archive?"))return!1;jQuery.getJSON("/component/functions.cfc",{method:"lockArchive",archive_name:e,returnformat:"json",queryformat:"column"},function(e){alert(e)})}function changeCollection(t){jQuery.getJSON("/component/functions.cfc",{method:"changeexclusive_collection_id",tgt:"",returnformat:"json",queryformat:"column"},function(e){document.location=t})}function saveSearch(t,e){var n,i,a=Date.now();void 0!==e&&0<e.length&&(i="ERROR: "+e+"\n\n"),i="Saving search for URL:\n\n"+t+" \n\nName your saved search (or copy and ",i+="paste the link above).\n\nManage or email saved searches from your profile, or go to /saved/{name of saved search}. Note ",i+="that saved searches, except those sepecifying only GUIDs, are dynamic; results change as data changes.\n\nName of saved search (must be unique):\n",null!==(a=prompt(i,a))&&(n=encodeURIComponent(a),$.getJSON("/component/functions.cfc",{method:"saveSearch",returnURL:t,srchName:n,returnformat:"json",queryformat:"column"},function(e){if("success"!=e){if(alert(e),"You must create an account or log in to save searches."==e)return!1;saveSearch(t,e)}else pathArray=window.location.href.split("/"),protocol=pathArray[0],host=pathArray[2],url=protocol+"//"+host,alert("Saved search \n"+url+"/saved/"+n+"\n Find it in the My Stuff tab.")}))}function addPartToContainer(){var e,t,n,i,a;if(document.getElementById("pTable").className="red",e=document.getElementById("collection_object_id").value,t=document.getElementById("part_name").value,n=document.getElementById("part_name_2").value,i=document.getElementById("parent_barcode").value,a=document.getElementById("new_container_type").value,0===e.length||0===t.length||0===i.length)return alert("Something is null"),!1;$.getJSON("/component/functions.cfc",{method:"addPartToContainer",collection_object_id:e,part_id:t,part_id2:n,parent_barcode:i,new_container_type:a,returnformat:"json",queryformat:"column"},function(e){statAry=e.split("|");var t=statAry[0],n=statAry[1];document.getElementById("pTable").className="";var i=document.getElementById("msgs"),a=document.getElementById("msgs_hist"),e=i.innerHTML+"<hr>"+a.innerHTML;a.innerHTML=e,i.innerHTML=n,0===t?i.className="error":(i.className="successDiv",document.getElementById("oidnum").focus(),document.getElementById("oidnum").select(),getParts())})}function clonePart(){var e=document.getElementById("collection_id").value,t=document.getElementById("other_id_type").value,n=document.getElementById("oidnum").value;0<e.length&&0<t.length&&0<n.length?$.getJSON("/component/functions.cfc",{method:"getSpecimen",collection_id:e,other_id_type:t,oidnum:n,returnformat:"json",queryformat:"column"},function(e){(-1<toString(e.DATA.COLLECTION_OBJECT_ID[0]).indexOf("Error:")?alert:newPart)(e.DATA.COLLECTION_OBJECT_ID[0])}):alert("Error: cannot resolve ID to specimen.")}function checkSubmit(){!0===document.getElementById("submitOnChange").checked&&addPartToContainer()}function newPart(e){var t,n;collection_id=document.getElementById("collection_id").value,t=document.getElementById("part_name").value,n="/form/newPart.cfm",n+="?collection_id="+collection_id,n+="&collection_object_id="+e,divpop(n+="&part="+t)}function getParts(){var t,e,n,a,o,l,c,d,r,s,u,m,p,g,h=document.getElementById("collection_id").value,f=document.getElementById("other_id_type").value,v=document.getElementById("oidnum").value;0<h.length&&0<f.length&&0<v.length&&((t=document.createElement("DIV")).id="ajaxStatus",t.className="ajaxStatus",t.innerHTML="Fetching parts...",document.body.appendChild(t),e=document.getElementById("noBarcode").checked,n=document.getElementById("noSubsample").checked,$.getJSON("/component/functions.cfc",{method:"getParts",collection_id:h,other_id_type:f,oidnum:v,noBarcode:e,noSubsample:n,returnformat:"json",queryformat:"column"},function(e){if(a=e.DATA,t=document.getElementById("ajaxStatus"),document.body.removeChild(t),o=document.getElementById("thisSpecimen"),m=document.getElementById("collection_id"),l=document.getElementById("collection_object_id"),c=document.getElementById("part_name"),d=document.getElementById("part_name_2"),r=c.value,s=d.value,c.options.length=0,d.options.length=0,p=m.selectedIndex,u=m.options[p].text,m=document.getElementById("other_id_type").value,p=document.getElementById("oidnum").value,p=u+" "+m+" "+p,-1<a.PART_NAME[0].indexOf("Error:"))o.className="error",p+=" = "+a.PART_NAME[0],l.value="",document.getElementById("pTable").className="red";else{for(document.getElementById("pTable").className="",o.className="",l.value=a.COLLECTION_OBJECT_ID[0],(g=document.createElement("option")).setAttribute("value",""),g.appendChild(document.createTextNode("")),d.appendChild(g),i=0;i<e.ROWCOUNT;i++)g=document.createElement("option"),option2=document.createElement("option"),g.setAttribute("value",a.PARTID[i]),option2.setAttribute("value",a.PARTID[i]),pStr=a.PART_NAME[i],null!==a.BARCODE[i]&&(pStr+=" ["+a.BARCODE[i]+"]"),g.appendChild(document.createTextNode(pStr)),option2.appendChild(document.createTextNode(pStr)),c.appendChild(g),d.appendChild(option2);c.value=r,d.value=s,p+=' = <a target="_blank" href="/guid/'+a.COLLECTION[0]+":"+a.CAT_NUM[0]+'">',p+=a.COLLECTION[0]+":"+a.CAT_NUM[0]+"</a>",p+=" ("+a.CUSTOMIDTYPE[0]+" "+a.CUSTOMID[0]+")"}o.innerHTML=p}))}function divpop(e){var t,n=document.createElement("div");n.id="bgDiv",n.className="bgDiv",document.body.appendChild(n),(n=document.createElement("div")).id="ppDiv",n.className="pickBox",n.innerHTML="Loading....",n.src="",document.body.appendChild(n),window.XMLHttpRequest?t=new XMLHttpRequest:window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==t&&(t.onreadystatechange=function(){divpopDone(t)},t.open("GET",e,!0),t.send(""))}function divpopDone(e){var t;4==e.readyState&&(200==e.status?document.getElementById("ppDiv").innerHTML=e.responseText:document.getElementById("ppDiv").innerHTML="ahah error:\n"+e.statusText,t=document.getElementById("ppDiv"),(e=document.createElement("span")).className="popDivControl",e.setAttribute("onclick","divpopClose();"),e.innerHTML="X",t.appendChild(e))}function divpopClose(){var e=document.getElementById("ppDiv");document.body.removeChild(e);e=document.getElementById("bgDiv");document.body.removeChild(e)}function makePart(){var t,n,e=document.getElementById("collection_object_id").value,i=document.getElementById("npart_name").value,a=document.getElementById("lot_count").value,o=document.getElementById("coll_obj_disposition").value,l=document.getElementById("condition").value,c=document.getElementById("coll_object_remarks").value,d=document.getElementById("barcode").value,r=document.getElementById("new_container_type").value;$.getJSON("/component/functions.cfc",{method:"makePart",collection_object_id:e,part_name:i,lot_count:a,coll_obj_disposition:o,condition:l,coll_object_remarks:c,barcode:d,new_container_type:r,returnformat:"json",queryformat:"column"},function(e){t=e.DATA,"error"==t.STATUS[0]?(n=t.MSG[0],alert(n)):(n="Created part: ",n+=t.PART_NAME[0]+" ",null!==t.BARCODE[0]&&(n+="barcode "+t.BARCODE[0],null!==t.NEW_CONTAINER_TYPE[0]&&(n+="( "+t.NEW_CONTAINER_TYPE[0]+")")),n=document.getElementById("ppDiv"),document.body.removeChild(n),n=document.getElementById("bgDiv"),document.body.removeChild(n),getParts())})}function changecustomOtherIdentifier(e){$.getJSON("/component/functions.cfc",{method:"changecustomOtherIdentifier",tgt:e,returnformat:"json",queryformat:"column"},function(e){"success"==e?document.getElementById("customOtherIdentifier").className="":alert("An error occured: "+e)})}function IsNumeric(e){var t,n=!0;for(i=0;i<e.length&&!0===n;i++)t=e.charAt(i),-1=="0123456789.".indexOf(t)&&(n=!1);return n}function orapwCheck(e,t){var n=/^[A-Za-z0-9!$%&_?(\-)<>=/:;*\.]$/,i="Password is acceptable";-1<e.indexOf(t)&&(i="Password may not contain your username."),(e.length<6||30<e.length)&&(i="Password must be between 6 and 30 characters."),e.match(/[a-zA-Z]/)||(i="Password must contain at least one letter."),e.match(/\d+/)||(i="Password must contain at least one number."),e.match(/[!,$,%,&,*,?,_,-,(,),<,>,=,/,:,;,.]/)||(i="Password must contain at least one of: !,$,%,&,*,?,_,-,(,),<,>,=,/,:,;.");for(var a=0;a<e.length;a++)e.charAt(a).match(n)||(i="Password may contain only A-Z, a-z, 0-9, and !$%&_?(-)<>=/:;*.");return i}function getCtDocVal(e,t){e="/info/ctDocumentation.cfm?table="+e;0<(t=t?$("#"+t).val():"").length&&(e+="#"+t.replace(/[^0-9a-zA-Z]/g,"_").toLowerCase()),windowOpener(e,"ctDocWin","width=700,height=400, resizable,scrollbars")}function getCtDoc(e,t){e="/info/ctDocumentation.cfm?table="+e;void 0!==t&&(e+="#"+t.replace(/[^0-9a-zA-Z]/g,"_").toLowerCase()),windowOpener(e,"ctDocWin","width=700,height=400, resizable,scrollbars")}function windowOpener(e,t,n){popupWins=[],"object"!=typeof popupWins[t]||popupWins[t].closed?popupWins[t]=window.open(e,t,n):popupWins[t].location.href=e,popupWins[t].focus()}function noenter(e){e=window.event?window.event.keyCode:e.which;return 13!=e}function chgCondition(e){helpWin=windowOpener("/picks/condition.cfm?collection_object_id="+e,"conditionWin","width=800,height=338, resizable,scrollbars")}function getLoan(e,t,n,i){i="/picks/getLoan.cfm?LoanIDFld="+e+"&LoanNumberFld="+t+"&loanNumber="+n+"&agent_name="+i;loanpickwin=window.open(i,"","width=400,height=338, resizable,scrollbars")}function pickSpecEvtLnk(e,t,n){$("<iframe src='"+("/picks/linkSpecimenEvent.cfm?collection_object_id="+e+"&rel_key_typ="+t+"&rel_key_val="+n)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","top"],title:"Pick Linked Event",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function addPermitToTrans(e,t){$("<iframe src='"+("/picks/PermitPick.cfm?transaction_id="+e+"&callbackfunction="+t)+"' id='dialog' class='popupDialog' style='width:1200px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","center"],title:"Pick Agent",width:1200,close:function(){$(this).remove()}}).width(1190).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function findDOI(e){$("<iframe src='"+("/picks/findDOI.cfm?publication_title="+e)+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","center"],title:"Find DOI",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getPublication(e,t,n){n=(n=encodeURIComponent(n)).replace(/[!'()*]/g,escape);$("#"+e).addClass("badPick");n="/picks/findPublication.cfm?pubStringFld="+e+"&publication_title="+n;n+="&pubIdFld="+t,$("<iframe src='"+n+"' id='dialog' class='popupDialog' style='width:600px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:["center","center"],title:"Find Publication",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getAgent(e,t,n,i,a){a="/picks/findAgent.cfm?agentIdFld="+e+"&agentNameFld="+t+"&formName="+n+"&agent_name="+i+"&allowCreation="+a;agentpickwin=window.open(a,"","width=400,height=338, resizable,scrollbars")}function getProject(e,t,n,i){i="/picks/findProject.cfm?projIdFld="+e+"&projNameFld="+t+"&formName="+n+"&project_name="+i;projpickwin=window.open(i,"","width=400,height=338, resizable,scrollbars")}function findCatalogedItem(e,t,n,i,a,o){o="/picks/findCatalogedItem.cfm?collIdFld="+e+"&CatNumStrFld="+t+"&formName="+n+"&oidType="+i+"&oidNum="+a+"&collID="+o;catItemWin=window.open(o,"","width=400,height=338, resizable,scrollbars")}function pickCollectingEvent(e,t,n){n="/place.cfm?sch=collecting_event&specop=pick_collecting_event&dispfld="+t+"&idfld="+e+"&collecting_event_name="+n;$("#"+t).addClass("badPick"),$("<iframe src='"+n+"' id='dialog' class='popupDialog' style='width:1200px;height:800px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:800,modal:!0,position:{my:"top",at:"top+150"},title:"Pick Event",width:1200,close:function(){$(this).remove()}}).width(1190).height(790),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function pickLocality(e,t,n){n="/place.cfm?sch=locality&specop=pick_locality&dispfld="+t+"&idfld="+e+"&locality_name="+n;$("#"+t).addClass("badPick"),$("<iframe src='"+n+"' id='dialog' class='popupDialog' style='width:1200px;height:800px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:800,modal:!0,position:{my:"top",at:"top+150"},title:"Pick Locality",width:1200,close:function(){$(this).remove()}}).width(1190).height(790),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function GeogPickold(e,t,n,i){i="/picks/GeogPick2.cfm?geogIdFld="+e+"&highGeogFld="+t+"&formName="+n+"&srchstring="+i;geogpick=window.open(i,"","width=600,height=600, toolbar,resizable,scrollbars,")}function pickGeography(e,t,n){n="/place.cfm?sch=geog&specop=pick_geog&hasGeoWKT=yes&valid_catalog_term_fg=1&dispfld="+t+"&idfld="+e+"&any_geog="+n;$("#"+t).addClass("badPick"),$("<iframe src='"+n+"' id='dialog' class='popupDialog' style='width:1200px;height:800px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:800,modal:!0,position:{my:"top",at:"top+150"},title:"Pick Geography",width:1200,close:function(){$(this).remove()}}).width(1190).height(790),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}function getAccn(e,t,n){n="/picks/findAccn.cfm?r_accnNumber="+e+"&rtnFldID="+t+"&r_InstAcrColnCde="+n,n=window.open(n,"","width=400,height=338, resizable,scrollbars")}function getAccnMedia(e,t){t="/picks/getAccnMedia.cfm?idOfTxtFld="+e+"&idOfPKeyFld="+t;t=window.open(t,"","width=400,height=338, resizable,scrollbars")}function getAccn2(e,t){t="/picks/getAccn.cfm?accnNumber="+e+"&collectionID="+t;t=window.open(t,"","width=400,height=338, resizable,scrollbars")}function getGeog(e,t,n,i){i="/picks/GeogPick2.cfm?geogIdFld="+e+"&highGeogFld="+t+"&formName="+n+"&srchstring="+i;geogpick=window.open(i,"","width=600,height=600, toolbar,resizable,scrollbars,")}function getGeog__oldnbusted(e,t,n,i){i="/picks/findHigherGeog.cfm?geogIdFld="+e+"&geogStringFld="+t+"&formName="+n+"&geogString="+i;geogpickwin=window.open(i,"","width=400,height=338, resizable,scrollbars")}function confirmDelete(e,t){if(t=t||"this record",!0!==confirm("Are you sure you want to delete "+t+"?"))return!1;document[e].submit()}function getHistory(e){historyWin=windowOpener("/info/ContHistory.cfm?container_id="+e,"historyWin","width=800,height=600, resizable,scrollbars")}function getQuadHelp(){helpWin=windowOpener("/info/quad.cfm","quadHelpWin","width=800,height=600, resizable,scrollbars,status")}function getLegal(e){helpWin=windowOpener("/info/legal.cfm?content="+e,"legalWin","width=400,height=338, resizable,scrollbars")}function getInfo(e,t){infoWin=windowOpener("/info/SpecInfo.cfm?subject="+e+"&thisId="+t,"infoWin","width=800,height=500, resizable,scrollbars")}function findMedia(e,t,n){n="/picks/findMedia.cfm?mediaIdFld="+t+"&mediaStringFld="+e+"&media_uri="+n;mediapick=window.open(n,"","width=400,height=338, resizable,scrollbars")}function taxaPick(e,t,n,i){i="/picks/TaxaPick.cfm?taxonIdFld="+e+"&taxonNameFld="+t+"&formName="+n+"&scientific_name="+i;taxapick=window.open(i,"","width=1200,height=800, resizable,scrollbars")}function CatItemPick(e,t,n,i){i="/picks/CatalogedItemPick.cfm?collIdFld="+e+"&catNumFld="+t+"&formName="+n+"&sciNameFld="+i,window.open(i,"","width=400,height=338, resizable,scrollbars")}function findAgentName(e,t,n){n="/picks/findAgentName.cfm?agentIdFld="+e+"&agentNameFld="+t+"&agentName="+n;agentpick=window.open(n,"","width=400,height=338, resizable,scrollbars")}function addrPick(e,t,n){n="/picks/AddrPick.cfm?addrIdFld="+e+"&addrFld="+t+"&formName="+n;addrpick=window.open(n,"","width=400,height=338, resizable,scrollbars")}function findJournal(e,t,n,i){i="/picks/findJournal.cfm?journalIdFld="+e+"&journalNameFld="+t+"&formName="+n+"&journalName="+i,window.open(i,"","width=400,height=338, toolbar,location,status,menubar,resizable,scrollbars,")}function deleteEncumbrance(e,t){t="/picks/DeleteEncumbrance.cfm?encumbrance_id="+e+"&collection_object_id="+t,window.open(t,"","width=400,height=338, toolbar,location,status,menubar,resizable,scrollbars,")}function getAllSheets(){var e,t,n,i;if(!window.ScriptEngine&&navigator.__ice_version)return document.styleSheets;if(document.getElementsByTagName)e=document.getElementsByTagName("LINK"),t=document.getElementsByTagName("STYLE");else{if(!document.styleSheets||!document.all)return[];e=document.all.tags("LINK"),t=document.all.tags("STYLE")}for(i=0,os=[];e[i];i++)"string"==typeof(n=e[i].rel||(e[i].getAttribute?e[i].getAttribute("rel"):""))&&n.toLowerCase().indexOf("style")+1&&(os[os.length]=e[i]);for(i=0;t[i];i++)os[os.length]=t[i];return os}function changeStyle(){var e,t=0;for(ss=getAllSheets();ss[t];t++)for(ss[t].title&&(ss[t].disabled=!0),e=0;e<arguments.length;e++)ss[t].title==arguments[e]&&(ss[t].disabled=!1);ss.length||alert("Your browser cannot change stylesheets")}function toProperCase(e){var t=document.getElementById(e),n=(t.value.length,t.selectionStart),i=t.selectionEnd,e=t.value.substring(n,i).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()}),i=t.value.substring(0,n)+e+t.value.substring(i,t.value.length);t.value=i}function italicize(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,a=t.selectionEnd,e=t.value.substring(i,a);0<e.length&&(e="<i>"+e+"</i>",t.value=t.value.substring(0,i)+e+t.value.substring(a,n))}function bold(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,a=t.selectionEnd,e=t.value.substring(i,a);0<e.length&&(e="<b>"+e+"</b>",t.value=t.value.substring(0,i)+e+t.value.substring(a,n))}function superscript(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,a=t.selectionEnd,e=t.value.substring(i,a);0<e.length&&(e="<sup>"+e+"</sup>",t.value=t.value.substring(0,i)+e+t.value.substring(a,n))}function subscript(e){var t=document.getElementById(e),n=t.value.length,i=t.selectionStart,a=t.selectionEnd,e=t.value.substring(i,a);0<e.length&&(e="<sub>"+e+"</sub>",t.value=t.value.substring(0,i)+e+t.value.substring(a,n))}function setPartAttOptions(t,e){var n,i,o,l;$.getJSON("/component/functions.cfc",{method:"getPartAttOptions",returnformat:"json",patype:e},function(e){if(e.TYPE,l="attribute_value_"+t,i="attribute_units_"+t,"unit"==e.TYPE){for(n='<input type="text" name="'+l+'" id="'+l+'">',$("#v_"+t).html(n),o=e.VALUES.split("|"),n='<select name="'+i+'" id="'+i+'">',a=0;a<o.length;++a)n+='<option value="'+o[a]+'">'+o[a]+"</option>";n+="</select>",$("#u_"+t).html(n)}else if("value"==e.TYPE){for(o=e.VALUES.split("|"),n='<select name="'+l+'" id="'+l+'">',a=0;a<o.length;++a)n+='<option value="'+o[a]+'">'+o[a]+"</option>";n+="</select>",$("#v_"+t).html(n),$("#u_"+t).html("")}else l='<textarea name="'+l+'" id="'+l+'" class="smalltextarea"></textarea>',$("#v_"+t).html(l),$("#u_"+t).html("")})}function mgPartAtts(e){addBGDiv("closePartAtts()");var t=document.createElement("iFrame");t.id="partsAttDiv",t.className="annotateBox",t.innerHTML="<br>Loading...",document.body.appendChild(t);e="/form/partAtts.cfm?partID="+e;t.src=e}function closePartAtts(){$("#bgDiv").remove(),$("#partsAttDiv").remove(),$("#bgDiv",window.parent.document).remove(),$("#partsAttDiv",window.parent.document).remove()}function removeUpload(){document.getElementById("uploadDiv")&&$("#uploadDiv").remove(),removeBgDiv()}function closeUpload(e,t){document.getElementById("media_uri").value=e,document.getElementById("preview_uri").value=t;e=e.split(".").pop();"jpg"==e||"jpeg"==e?($("#mime_type").val("image/jpeg"),$("#media_type").val("image")):"pdf"==e?($("#mime_type").val("application/pdf"),$("#media_type").val("text")):"mp3"==e?($("#mime_type").val("audio/mpeg3"),$("#media_type").val("audio")):"wav"==e?($("#mime_type").val("audio/x-wav"),$("#media_type").val("audio")):"dng"==e?($("#mime_type").val("image/dng"),$("#media_type").val("image")):"png"==e?($("#mime_type").val("image/png"),$("#media_type").val("image")):"tif"==e||"tiff"==e?($("#mime_type").val("image/tiff"),$("#media_type").val("image")):"htm"==e||"html"==e?($("#mime_type").val("text/html"),$("#media_type").val("")):"txt"==e?($("#mime_type").val("text/plain"),$("#media_type").val("text")):"mp4"==e&&($("#mime_type").val("video/mp4"),$("#media_type").val("video")),removeUpload()}function generateMD5(){var t;$.getJSON("/component/functions.cfc",{method:"genMD5",uri:$("#media_uri").val(),returnformat:"json",queryformat:"column"},function(e){addLabel(t=parseInt($("#number_of_labels").val())+parseInt(1)),$("#label__"+t).val("MD5 checksum"),$("#label_value__"+t).val(e)})}function closePreviewUpload(e){var t=document.getElementById("uploadDiv");document.body.removeChild(t),document.getElementById("preview_uri").value=e}function pickedRelationship(e){var t=document.getElementById(e).value,n=e.lastIndexOf("__"),n=e.substring(n+2,e.length),e=t.split(" "),t=e[e.length-1],e="related_id__"+n,n="related_value__"+n;document.getElementById(e).value="",(document.getElementById(n).value="")===t||("agent"==t?pickAgentModal(e,n,""):"locality"==t?LocalityPick(e,n,"newMedia"):"collecting_event"==t?pickCollectingEvent(e,n,""):"cataloged_item"==t?findCatalogedItem(e,n,"newMedia"):"project"==t?getProject(e,n,"newMedia"):"taxon_name"==t?taxaPick(e,n,"newMedia"):"publication"==t?getPublication(n,e,""):"accn"==t?getAccnMedia(n,e):"media"==t?findMedia(n,e):"loan"==t?getLoan(e,n):"permit"==t?alert("Edit permit to add Media"):"delete"==t?document.getElementById(n).value="Marked for deletion.....":alert("Something is broken. I have no idea what to do with a relationship to "+t))}function addRelation(e){var t,n,i=document.getElementById("relationships"),a=document.createElement("div");a.id="relationshipDiv__"+e,i.appendChild(a),t="relationship__"+(n=e-1),(t=document.getElementById(t).cloneNode(!0)).name="relationship__"+e,t.id="relationship__"+e,t.value="delete",a.appendChild(t),c=document.createElement("textNode"),c.innerHTML=":&nbsp;",a.appendChild(c),t="related_value__"+(n=e-1),(t=document.getElementById(t).cloneNode(!0)).name="related_value__"+e,t.id="related_value__"+e,t.value="",a.appendChild(t),n="related_id__"+n,(n=document.getElementById(n).cloneNode(!0)).name="related_id__"+e,n.id="related_id__"+e,a.appendChild(n),n=document.getElementById("addRelationship"),i.removeChild(n),e="addRelation("+(e+1)+")",n.setAttribute("onclick",e),i.appendChild(n),(n=document.getElementById("number_of_relations")).value=parseInt(n.value)+1}function addLabel(e){var t,n,i=document.getElementById("labels"),a=document.createElement("div");a.id="labelsDiv__"+e,i.appendChild(a),t="label__"+(n=e-1),(t=document.getElementById(t).cloneNode(!0)).name="label__"+e,t.id="label__"+e,t.value="",a.appendChild(t),c=document.createElement("textNode"),c.innerHTML=":&nbsp;",a.appendChild(c),n="label_value__"+n,(n=document.getElementById(n).cloneNode(!0)).name="label_value__"+e,n.id="label_value__"+e,n.value="",a.appendChild(n),n=document.getElementById("addLabel"),i.removeChild(n),e="addLabel("+(e+1)+")",n.setAttribute("onclick",e),i.appendChild(n),(n=document.getElementById("number_of_labels")).value=parseInt(n.value)+1}function saveAgentRank(){$.getJSON("/component/functions.cfc",{method:"saveAgentRank",agent_id:$("#agent_id").val(),agent_rank:$("#agent_rank").val(),remark:$("#remark").val(),transaction_type:$("#transaction_type").val(),returnformat:"json",queryformat:"column"},function(e){var t;0<e.length&&"fail"==e.substring(0,4)?alert(e):(t='<tr id="tablr'+e+'"><td>'+$("#agent_rank").val()+"</td>",t+="<td>"+$("#transaction_type").val()+"</td>",t+="<td>- just now - </td>",t+='<td>- you - <span class="infoLink" onclick="revokeAgentRank(\''+e+"');\">revoke</span></td>",t+="<td>"+$("#remark").val()+"</td></tr>",$("#agntRankTbl").append(t))})}function revokeAgentRank(t){$.getJSON("/component/functions.cfc",{method:"revokeAgentRank",agent_rank_id:t,returnformat:"json",queryformat:"column"},function(e){0<e.length&&"fail"==e.substring(0,4)?alert(e):$("#tablr"+t).remove()})}function removeMediaMultiCatItem(){$("#bgDiv").remove(),$("#pickFrame").remove()}function manyCatItemToMedia(e){var t=document.createElement("div");t.id="bgDiv",t.className="bgDiv",t.setAttribute("onclick","removeMediaMultiCatItem()"),document.body.appendChild(t),$('<iframe id="pickFrame" name="pickFrame" class="pickDiv" src="'+("/includes/forms/manyCatItemToMedia.cfm?media_id="+e)+'">').appendTo("body")}function pickThis(e,t,n,i){document.getElementById(e).value=n,document.getElementById(t).value=i,document.getElementById(e).className="goodPick",removePick()}function removePick(){document.getElementById("pickDiv")&&$("#pickDiv").remove(),removeBgDiv()}function addBGDiv(e){var t=document.createElement("div");t.id="bgDiv",t.className="bgDiv",null!==e&&0!==e.length||(e="removeBgDiv()"),t.setAttribute("onclick",e),document.body.appendChild(t)}function removeBgDiv(){document.getElementById("bgDiv")&&$("#bgDiv").remove()}function deleteAgent(e){$("#author_name"+e).addClass("red").val("deleted"),$("#authortr"+e+" td:nth-child(1)").addClass("red"),$("#authortr"+e+" td:nth-child(3)").addClass("red")}$.datepicker.setDefaults({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,constrainInput:!1,yearRange:"c-200:c+10"}),$(document).ready(function(){if("BroadcastChannel"in self)try{const t=new BroadcastChannel("session_time");var e=(new Date).getTime();t.postMessage(e),t.onmessage=function(e){postSessTime(e.data)},postSessTime(e)}catch(e){}$(".expandoSelect").on("click",function(){var e,t=$(this).data("ctl");$("#"+t).prop("multiple")?$("#"+t).removeAttr("multiple").attr("size","1"):(e=Math.min($("#"+t+" option").length,10),$("#"+t).attr("multiple","multiple").attr("size",e))}),$(document).on("click","a[class=newWinLocal]",function(){this.target="_blank"}),$(document).on("click","a[class=external]",function(){this.target="_blank"}),$(document).on("click","a[class=handbook]",function(){this.target="_blank"}),$(document).on("click","a[class=newwin]",function(){this.target="_blank"}),$(document).on("click",".helpLink",function(e){var t=$(this).data("helplink");null==t&&(t=this.id),$("<iframe src='"+("/doc/get_short_doc.cfm?fld="+t)+"' id='dialog' class='popupDialog' style='width:800px;height:600px;'></iframe>").dialog({autoOpen:!0,closeOnEscape:!0,height:600,modal:!0,position:{my:"top",at:"top+150"},title:"Documentation",width:800,close:function(){$(this).remove()}}).width(790).height(590),$(window).resize(function(){$(".ui-dialog-content").dialog("option","position",["center","center"])}),$(".ui-widget-overlay").click(function(){$(".ui-dialog-titlebar-close").trigger("click")})}),window.self!==window.top&&($("#the_whole_header").hide(),$("#arctosfooter").hide()),$("input[type='date'], input[type='datetime']").datepicker(),window.setInterval(function(){postSessTime()},6e4)});